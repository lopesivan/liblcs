<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
	<title>
		libLCS - A Logic Circuit Simulation Library in C++
	</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head>

<body>
<br>
<center>
<table>
	<tr>
		<td>
			<img src = "logo.jpg">
		</td>
		<td>
			<h1> - A Logic Circuit Simulation Library in C++</h1>
		</td>
	</tr>
</table>
</center>

<br><br>

<div class = "tabs">
<ul>
	<li><a class = "el" href = "index.html"><span>Home</span></a></li>
	<li><a class = "el" href = "news.html"><span>News</span></a></li>
	<li><a class = "el" href = "examples.html"><span>Examples</span></a></li>
	<li><a class = "el" href = "userguide.html"><span>Userguide</span></a></li>
	<li><a class = "el" href = "devguide.html"><span>Developer Guide</span></a></li>
	<li><a class = "el" href = "download.html"><span>Download</span></a></li>
	<li><a class = "el" href = "install.html"><span>Install</span></a></li>
	<li><a class = "el" href = "links.html"><span>Links</span></a></li>
	<li><a class = "el" href = "archives.html"><span>Archives</span></a></li>
</ul>
</div>

<br><br>

<!-- Generated by Doxygen 1.4.7 -->
<h1><a class="anchor" name="four_bit_counter_using_dff">(libLCS Example) 4-bit Counter using D-flipflops</a></h1><hr>
<p>
The aim of this example is to build and simulate a 4-bit counter using 4 off-the-shelf D-flipflop modules provided in libLCS. The diagram for the circuit is as below. The bit sequence D3D2D1D0 in that order is the output of our counter circuit.<p>
<div align="center">
<img src="four_bit_counter.jpg" alt="four_bit_counter.jpg">
</div>
<p>
The code which implements the above circuit is as follows.<p>
<div class="fragment"><pre class="fragment"><span class="preprocessor">#include &lt;iostream&gt;</span>
<span class="preprocessor">#include &lt;lcs/bus.h&gt;</span>
<span class="preprocessor">#include &lt;lcs/not.h&gt;</span>
<span class="preprocessor">#include &lt;lcs/clock.h&gt;</span>
<span class="preprocessor">#include &lt;lcs/changeMonitor.h&gt;</span>
<span class="preprocessor">#include &lt;lcs/simul.h&gt;</span>
<span class="preprocessor">#include &lt;lcs/dflipflop.h&gt;</span>

<span class="keyword">using namespace </span>lcs;
<span class="keyword">using namespace </span>std;

<span class="keywordtype">int</span> main(<span class="keywordtype">void</span>)
{
    <span class="comment">// Declare single line busses for each node in the</span>
    <span class="comment">// circuit. The flipflop output nodes have been set</span>
    <span class="comment">// to zero to start with. The busses are initialised</span>
    <span class="comment">// with the default template parameter of 1. The reset</span>
    <span class="comment">// line to be used for all the flipflops has been set </span>
    <span class="comment">// to 0.</span>
    Bus&lt;&gt; q0(0), q1(0), q2(0), q3(0), d0, d1, d2, d3, rst(0);

    <span class="comment">// Initialise a clock object.</span>
    Clock clk = Clock::getClock();

    <span class="comment">// Initialise the NOT gates in the circuit. The NOT</span>
    <span class="comment">// gates are initialised with the default template</span>
    <span class="comment">// parameter corresponding to a propogation delay of</span>
    <span class="comment">// zero.</span>
    Not&lt;&gt; n1(d0, q0), n2(d1, q1), n3(d2, q2), n4(d3, q3);

    <span class="comment">// Initialise the 4 positive edge-triggered flipflops</span>
    <span class="comment">// using the default template parameters.</span>
    DFlipFlop&lt;&gt; ff1(q0, d0, clk, rst), ff2(q1, d1, q0, rst), 
                ff3(q2, d2, q1, rst), ff4(q3, d3, q2, rst);

    <span class="comment">// Initialise a lcs::ChangeMonitor object to monitor</span>
    <span class="comment">// the output bit sequence of our counter circuit.</span>
    ChangeMonitor&lt;4&gt; count((d0,d1,d2,d3), string(<span class="stringliteral">"Count"</span>), DUMP_ON);

    Simulation::setStopTime(4000); <span class="comment">// Set the stop time.</span>
    Simulation::start(); <span class="comment">// Start the simulation.</span>

    <span class="keywordflow">return</span> 0;
}
</pre></div><p>
When the above program is compiled and run, the following output is obtained.<p>
<div class="fragment"><pre class="fragment">At time: 0,     Count: 1111
At time: 100,   Count: 0000
At time: 300,   Count: 0001
At time: 500,   Count: 0010
At time: 700,   Count: 0011
At time: 900,   Count: 0100
At time: 1100,  Count: 0101
At time: 1300,  Count: 0110
At time: 1500,  Count: 0111
At time: 1700,  Count: 1000
At time: 1900,  Count: 1001
At time: 2100,  Count: 1010
At time: 2300,  Count: 1011
At time: 2500,  Count: 1100
At time: 2700,  Count: 1101
At time: 2900,  Count: 1110
At time: 3100,  Count: 1111
At time: 3300,  Count: 0000
At time: 3500,  Count: 0001
At time: 3700,  Count: 0010
At time: 3900,  Count: 0011
</pre></div><p>
Below is the screenshot of the gtkwave plot of the generated VCD file.<p>
<div align="center">
<img src="screenshots/4_bit_counter_using_dff.jpg" alt="4_bit_counter_using_dff.jpg">
</div>
 <hr>
<center>
	Copyright &copy 2006, 2007 Siva Chandra <br>
	<img src = "logo_small.jpg">
</center>
</body>
</html>

