<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
	<title>
		libLCS - A Logic Circuit Simulation Library in C++
	</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head>

<body>
<br>
<center>
<table>
	<tr>
		<td>
			<img src = "logo.jpg">
		</td>
		<td>
			<h1> - A Logic Circuit Simulation Library in C++</h1>
		</td>
	</tr>
</table>
</center>

<br><br>

<div class = "tabs">
<ul>
	<li><a class = "el" href = "index.html"><span>Home</span></a></li>
	<li><a class = "el" href = "news.html"><span>News</span></a></li>
	<li><a class = "el" href = "examples.html"><span>Examples</span></a></li>
	<li><a class = "el" href = "userguide.html"><span>Userguide</span></a></li>
	<li><a class = "el" href = "devguide.html"><span>Developer Guide</span></a></li>
	<li><a class = "el" href = "download.html"><span>Download</span></a></li>
	<li><a class = "el" href = "install.html"><span>Install</span></a></li>
	<li><a class = "el" href = "links.html"><span>Links</span></a></li>
	<li><a class = "el" href = "archives.html"><span>Archives</span></a></li>
</ul>
</div>

<br><br>

<!-- Generated by Doxygen 1.4.7 -->
<h1><a class="anchor" name="four_bit_shiftregister_using_dff">(libLCS Example) A 4-bit shift register using D-flipflops</a></h1><hr>
<p>
In this example, we will build a 4-bit shift register using the off-the-shelf D-flipflops provided in libLCS. We will make use of one of the counter output bits from <a class="el" href="four_bit_counter_using_dff.html">this</a> example as the input bit stream for our shift register. The complete circuit diagram is as shown below.<p>
<div align="center">
<img src="four_bit_shiftregister.jpg" alt="four_bit_shiftregister.jpg">
</div>
<p>
The following is the program to simulate the above circuit.<p>
<div class="fragment"><pre class="fragment"><span class="preprocessor">#include &lt;iostream&gt;</span>
<span class="preprocessor">#include &lt;lcs/bus.h&gt;</span>
<span class="preprocessor">#include &lt;lcs/not.h&gt;</span>
<span class="preprocessor">#include &lt;lcs/clock.h&gt;</span>
<span class="preprocessor">#include &lt;lcs/simul.h&gt;</span>
<span class="preprocessor">#include &lt;lcs/changeMonitor.h&gt;</span>
<span class="preprocessor">#include &lt;lcs/dflipflop.h&gt;</span>

<span class="keyword">using namespace </span>lcs;
<span class="keyword">using namespace </span>std;

<span class="keywordtype">int</span> main(<span class="keywordtype">void</span>)
{
    Bus&lt;&gt; q0(0), q1(0), q2(0), q3(0), d0, d1, d2, d3, sr0(0), sr1(0), sr2(0), sr3(0), rst(0);
    Clock clk = Clock::getClock();

    Not&lt;&gt; n1(d0, q0), n2(d1, q1), n3(d2, q2), n4(d3, q3);

    <span class="comment">// Initialise 4 positive edge-triggered D-flipflops</span>
    <span class="comment">// using the default template parameters. These flipflops</span>
    <span class="comment">// will form our counter circuit.</span>
    DFlipFlop&lt;&gt; ff1(q0, d0, clk, rst), ff2(q1, d1, q0, rst), 
                    ff3(q2, d2, q1, rst), ff4(q3, d3, q2, rst);

    <span class="comment">// Initialise the D-flipflop modules of the shift register.</span>
    <span class="comment">// They are also initialised with the default template</span>
    <span class="comment">// parameters.</span>
    DFlipFlop&lt;&gt; ff5(sr0, d1, clk, rst), ff6(sr1, sr0, clk, rst),
                ff7(sr2, sr1, clk, rst), ff8(sr3, sr2, clk, rst);

    ChangeMonitor&lt;4&gt; count((d0,d1,d2,d3), string(<span class="stringliteral">"Count"</span>), DUMP_ON);
    ChangeMonitor&lt;4&gt; sr((sr0,sr1,sr2,sr3), string(<span class="stringliteral">"Register"</span>), DUMP_ON);

    Simulation::setStopTime(4000);
    Simulation::start();

    <span class="keywordflow">return</span> 0;
}
</pre></div><p>
When the above code is compiled and run, the following output is obtained.<p>
<div class="fragment"><pre class="fragment">At time: 0,     Count: 1111
At time: 100,   Count: 0000
At time: 100,   <a class="code" href="namespacelcs.html#43ea00457860015506a7bab58d414c88">Shift</a> Register: 0001
At time: 300,   Count: 0001
At time: 300,   <a class="code" href="namespacelcs.html#43ea00457860015506a7bab58d414c88">Shift</a> Register: 0010
At time: 500,   Count: 0010
At time: 500,   <a class="code" href="namespacelcs.html#43ea00457860015506a7bab58d414c88">Shift</a> Register: 0100
At time: 700,   Count: 0011
At time: 700,   <a class="code" href="namespacelcs.html#43ea00457860015506a7bab58d414c88">Shift</a> Register: 1001
At time: 900,   Count: 0100
At time: 900,   <a class="code" href="namespacelcs.html#43ea00457860015506a7bab58d414c88">Shift</a> Register: 0011
At time: 1100,  Count: 0101
At time: 1100,  <a class="code" href="namespacelcs.html#43ea00457860015506a7bab58d414c88">Shift</a> Register: 0110
At time: 1300,  Count: 0110
At time: 1300,  <a class="code" href="namespacelcs.html#43ea00457860015506a7bab58d414c88">Shift</a> Register: 1100
At time: 1500,  Count: 0111
At time: 1500,  <a class="code" href="namespacelcs.html#43ea00457860015506a7bab58d414c88">Shift</a> Register: 1001
At time: 1700,  Count: 1000
At time: 1700,  <a class="code" href="namespacelcs.html#43ea00457860015506a7bab58d414c88">Shift</a> Register: 0011
At time: 1900,  Count: 1001
At time: 1900,  <a class="code" href="namespacelcs.html#43ea00457860015506a7bab58d414c88">Shift</a> Register: 0110
At time: 2100,  Count: 1010
At time: 2100,  <a class="code" href="namespacelcs.html#43ea00457860015506a7bab58d414c88">Shift</a> Register: 1100
At time: 2300,  Count: 1011
At time: 2300,  <a class="code" href="namespacelcs.html#43ea00457860015506a7bab58d414c88">Shift</a> Register: 1001
At time: 2500,  Count: 1100
At time: 2500,  <a class="code" href="namespacelcs.html#43ea00457860015506a7bab58d414c88">Shift</a> Register: 0011
At time: 2700,  Count: 1101
At time: 2700,  <a class="code" href="namespacelcs.html#43ea00457860015506a7bab58d414c88">Shift</a> Register: 0110
At time: 2900,  Count: 1110
At time: 2900,  <a class="code" href="namespacelcs.html#43ea00457860015506a7bab58d414c88">Shift</a> Register: 1100
At time: 3100,  Count: 1111
At time: 3100,  <a class="code" href="namespacelcs.html#43ea00457860015506a7bab58d414c88">Shift</a> Register: 1001
At time: 3300,  Count: 0000
At time: 3300,  <a class="code" href="namespacelcs.html#43ea00457860015506a7bab58d414c88">Shift</a> Register: 0011
At time: 3500,  Count: 0001
At time: 3500,  <a class="code" href="namespacelcs.html#43ea00457860015506a7bab58d414c88">Shift</a> Register: 0110
At time: 3700,  Count: 0010
At time: 3700,  <a class="code" href="namespacelcs.html#43ea00457860015506a7bab58d414c88">Shift</a> Register: 1100
At time: 3900,  Count: 0011
At time: 3900,  <a class="code" href="namespacelcs.html#43ea00457860015506a7bab58d414c88">Shift</a> Register: 1001
</pre></div><p>
Below is the screenshot of the gtkwave plot of the generated VCD file.<p>
<div align="center">
<img src="screenshots/4_bit_shiftregister_using_dff.jpg" alt="4_bit_shiftregister_using_dff.jpg">
</div>
 <hr>
<center>
	Copyright &copy 2006, 2007 Siva Chandra <br>
	<img src = "logo_small.jpg">
</center>
</body>
</html>

